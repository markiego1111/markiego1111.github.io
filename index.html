<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Event UK: Source Entertainment Simulator</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-10">
  <h1 class="text-4xl font-bold mb-8">Event UK: Source Entertainment Simulator</h1>

  <!-- Entertainment Type -->
  <div>
    <h2 class="text-xl font-semibold mb-2">Entertainment Type</h2>
    <div id="entertainmentType" class="flex flex-wrap gap-2 mb-6"></div>
  </div>

  <!-- Select Date & Time -->
  <div>
    <h2 class="text-xl font-semibold mb-2">Select Date & Time</h2>
    <div class="flex flex-row gap-4 mb-6">
      <input type="date" id="eventDate" class="w-1/2 p-3 border rounded" />
      <input type="time" id="eventTime" class="w-1/2 p-3 border rounded" />
    </div>
  </div>

  <!-- Music Style -->
  <div>
    <h2 class="text-xl font-semibold mb-2">Music Style (up to 5)</h2>
    <div id="musicStyle" class="flex flex-wrap gap-2 mb-6"></div>
  </div>

  <!-- DJ Style -->
  <div>
    <h2 class="text-xl font-semibold mb-2">DJ Style (up to 5)</h2>
    <div id="djStyle" class="flex flex-wrap gap-2 mb-6"></div>
  </div>

  <!-- Equipment -->
  <div>
    <h2 class="text-xl font-semibold mb-2">Equipment</h2>
    <div id="equipment" class="flex flex-wrap gap-2 mb-6"></div>
  </div>

  <!-- Help with AI Button -->
  <div class="mb-4">
    <button id="aiHelpBtn" class="flex items-center space-x-2 px-6 py-3 bg-[#0D9487] text-white rounded-full font-semibold">
      <span id="aiIcon">✨</span>
      <span id="aiLabel">Help with AI</span>
    </button>
  </div>

  <!-- Description -->
  <label class="block text-lg font-semibold text-gray-800 mb-1">Describe your event</label>
  <div class="mb-2">
    <span class="text-[#0D9487] font-medium">Things to include:</span>
    <span class="text-gray-600 ml-2">What's the occasion?, Who's the crowd?, What's the vibe?, Any music genres you don't want played?</span>
  </div>
  <textarea id="description" rows="6" class="w-full border rounded-lg p-4 text-lg placeholder-gray-400 mb-8" placeholder="Describe your event..."></textarea>

  <!-- Next Button -->
  <button id="nextBtn" class="px-6 py-3 bg-gray-400 text-white font-semibold rounded-full cursor-not-allowed" disabled>Next</button>

  <script>
    const categories = {
      entertainmentType: ["DJ", "Live Music", "Karaoke", "Quiz", "Tribute", "Drag", "Bingo", "Childrens Entertainer", "Bandeoke", "Magician", "Open Mic Host", "Poker", "Comedy", "Santa"],
      musicStyle: ["70s", "80s", "90s", "00s", "Current Hits", "Britpop", "Dance", "Disco", "Electronic", "Funk", "Hip Hop", "House", "Indie", "Motown", "Pop", "R&B", "Rock", "Soul"],
      djStyle: ["Personality DJ", "No Mic Work", "Some Mic Work", "No Requests", "Take Requests", "Beat Mixing", "Keep 'em Singing", "Keep 'em Dancing", "Older Audience", "Younger Audience", "None"],
      equipment: ["Laptop, Decks & Mixer", "PA System", "Lights", "Full Mobile Rig", "None"]
    };

    const state = {
      entertainmentType: [],
      musicStyle: [],
      djStyle: [],
      equipment: []
    };

    function renderPills(containerId, options, max = null, allowNone = false) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      options.forEach(option => {
        const pill = document.createElement('button');
        pill.textContent = option;
        pill.className = 'px-4 py-2 border border-gray-300 rounded-full text-sm';
        pill.addEventListener('click', () => {
          const selected = state[containerId];

          if (containerId === 'entertainmentType') {
            if (selected[0] === option) {
              selected.length = 0;
            } else {
              selected.length = 0;
              selected.push(option);
            }
          } else if (containerId === 'equipment') {
            if (option === 'None') {
              state.equipment = ['None'];
            } else {
              const index = selected.indexOf(option);
              if (index > -1) {
                selected.splice(index, 1);
              } else {
                selected.push(option);
              }
              state.equipment = state.equipment.filter(e => e !== 'None');
            }
          } else {
            const index = selected.indexOf(option);
            if (index > -1) {
              selected.splice(index, 1);
            } else {
              if (!max || selected.length < max) {
                selected.push(option);
              }
            }
          }

          updateUI();
        });
        container.appendChild(pill);
      });
    }

    function updateUI() {
      ['entertainmentType', 'musicStyle', 'djStyle', 'equipment'].forEach(section => {
        const pills = document.getElementById(section).children;
        for (const pill of pills) {
          const selected = state[section].includes(pill.textContent);
          pill.className = selected
            ? 'px-4 py-2 rounded-full text-sm bg-[#0D9487] text-white'
            : 'px-4 py-2 border border-gray-300 rounded-full text-sm';
        }
      });

      const nextBtn = document.getElementById('nextBtn');
      const ready = state.entertainmentType.length > 0 && state.musicStyle.length > 0 && state.djStyle.length > 0 && state.equipment.length > 0;
      nextBtn.disabled = !ready;
      nextBtn.className = ready
        ? 'px-6 py-3 bg-[#0D9487] text-white font-semibold rounded-full cursor-pointer'
        : 'px-6 py-3 bg-gray-400 text-white font-semibold rounded-full cursor-not-allowed';
    }

    renderPills('entertainmentType', categories.entertainmentType);
    renderPills('musicStyle', categories.musicStyle, 5);
    renderPills('djStyle', categories.djStyle, 5);
    renderPills('equipment', categories.equipment);
    updateUI();

    const aiHelpBtn = document.getElementById('aiHelpBtn');
    const aiIcon = document.getElementById('aiIcon');
    const aiLabel = document.getElementById('aiLabel');
    const descriptionBox = document.getElementById('description');
    let aiOriginalText = '';

    aiHelpBtn.addEventListener('click', () => {
      if (!aiOriginalText) aiOriginalText = descriptionBox.value;

      aiIcon.innerHTML = '';
      aiIcon.className = 'h-4 w-4 rounded-full border-2 border-t-transparent border-white animate-spin';
      aiLabel.textContent = 'Generating...';

      setTimeout(() => {
        descriptionBox.value = 'A vibrant Thursday evening crowd with young professionals, upbeat and modern vibes.';
        aiIcon.className = '';
        aiIcon.innerHTML = '✨';
        aiLabel.textContent = 'Help with AI';
      }, 1500);
    });
  </script>
</body>
</html>
